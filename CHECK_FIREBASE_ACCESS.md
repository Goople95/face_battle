# Firebase Storage 访问检查

## 问题诊断

文件已上传但无法访问，可能的原因：

### 1. Rules还未发布
- 请确认已点击 **"发布"** 按钮
- 发布后会显示"规则已发布"的提示

### 2. 文件权限问题
在Firebase Console中：
1. 点击 `npc_config.json` 文件
2. 在右侧面板查看"访问令牌"或"下载URL"
3. 如果有"创建访问令牌"按钮，点击它

### 3. 手动获取下载URL
1. 在Storage页面，进入 `npcs` 文件夹
2. 点击 `npc_config.json` 文件
3. 在右侧详情面板中，找到"下载URL"部分
4. 复制完整的URL

### 4. 测试其他文件
尝试访问其他文件看是否有同样问题：
- 图片：点击 `0001/1.png`，获取其下载URL
- 视频：点击 `0001/happy.mp4`，获取其下载URL

## 临时解决方案

如果URL访问有问题，可以：

### 方法1：使用Firebase Admin SDK
在服务器端使用Admin SDK可以绕过权限限制

### 方法2：生成签名URL
在Firebase Console中为每个文件生成访问令牌

### 方法3：更改文件权限
1. 选择文件
2. 点击"更多"菜单（三个点）
3. 选择"管理访问权限"
4. 设置为公开访问

## 验证步骤

1. **确认Rules已发布**
   - 状态应显示"已发布"
   - 时间戳应该是最新的

2. **检查文件列表**
   - 确认 `npc_config.json` 在 `npcs/` 文件夹下
   - 文件大小应该是 5.3 KB

3. **测试直接访问**
   在Firebase Console中：
   - 点击文件
   - 右侧会显示"下载URL"
   - 复制这个URL在浏览器中测试

请按照这些步骤检查，找到实际可用的下载URL。