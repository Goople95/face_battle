/// 行为分析规则文档
/// 
/// 本文档定义了玩家行为特征的分析规则和计算方法
/// 用于分析玩家在骰子游戏中的行为模式和倾向
library;

class BehaviorAnalysisRules {
  /// ===========================
  /// 一、虚张倾向 (Bluffing Tendency)
  /// ===========================
  /// 
  /// 定义：平均每局游戏中玩家虚张叫牌的次数
  /// 
  /// 虚张判定条件：
  /// - 玩家每次叫牌时，如果手上该点数的实际数量 < 叫牌数量的50%，判定为虚张
  /// - 不仅仅是最后一轮，每一轮叫牌都会进行判定
  /// 
  /// 计算公式：
  /// 虚张倾向 = 虚张叫牌总次数 / 总游戏局数 × 100%
  /// 
  /// 示例：
  /// - 游戏1：玩家虚张2次
  /// - 游戏2：玩家虚张1次
  /// - 游戏3：玩家虚张3次
  /// - 虚张倾向 = (2+1+3)/3 = 2.0（平均每局虚张2次）
  /// - 百分比表示 = 200%（可能超过100%，因为每局可能多次虚张）
  /// 
  /// 解读指南：
  /// • 0-20%：极少虚张，叫牌可信度高
  /// • 20-40%：偶尔虚张，相对诚实
  /// • 40-60%：适度虚张，真假难辨
  /// • 60-80%：经常虚张，需要警惕
  /// • 80-100%：几乎都在虚张，叫牌不可信
  
  /// ===========================
  /// 二、激进程度 (Aggressiveness)
  /// ===========================
  /// 
  /// 定义：玩家大幅提高叫牌的频率，反映冒险倾向
  /// 
  /// 计算公式：
  /// 激进程度 = 激进叫牌次数 / 总游戏局数 × 100%
  /// 
  /// 叫牌分类规则：
  /// 
  /// 【激进叫牌】（满足任一条件）：
  /// 1. 换更高点数且数量增加
  ///    - 例：从3个2换到4个5
  /// 2. 换更低点数且增加≥2个
  ///    - 例：从3个5换到5个2、从3个5换到6个2
  /// 3. 不换点数，在≥2个基础上一次增加≥2个
  ///    - 例：从2个5加到4个5
  /// 
  /// 解读指南：
  /// • 0-20%：很少激进，稳扎稳打
  /// • 20-40%：偶尔激进，适度冒险
  /// • 40-60%：经常激进，喜欢大幅加注
  /// • 60-80%：非常激进，频繁大幅加注
  /// • 80-100%：极度激进，几乎每局都大幅加注
  
  /// ===========================
  /// 三、可预测性 (Predictability)
  /// ===========================
  /// 
  /// 定义：玩家叫牌策略的固定程度，反映是否总是换点数或总是不换点数
  /// 
  /// 计算公式：
  /// 可预测性 = max(换点数次数, 不换点数次数) / (换点数次数 + 不换点数次数) × 100%
  /// 
  /// 计算逻辑：
  /// - 换点数：从一个点数换到另一个点数（如从4换到5或从5换到2）
  /// - 不换点数：保持相同点数只增加数量（如从3个4加到4个4）
  /// - 如果玩家总是换点数或总是不换，可预测性接近100%
  /// - 如果换与不换各占一半，可预测性接近50%
  /// 
  /// 示例：
  /// - 玩家10次叫牌中，8次换点数，2次不换：可预测性 = 8/10 = 80%
  /// - 玩家10次叫牌中，5次换点数，5次不换：可预测性 = 5/10 = 50%
  /// 
  /// 解读指南：
  /// • 0-20%：行为随机，难以预测，策略多变
  /// • 20-40%：较难预测，灵活多变
  /// • 40-60%：中等可预测性，有一定规律
  /// • 60-80%：行为模式固定，容易预测
  /// • 80-100%：极其固定，完全可预测，总是使用相同策略
  
  /// ===========================
  /// 四、其他统计指标
  /// ===========================
  /// 
  /// 【质疑率】
  /// 计算公式：质疑率 = 总质疑次数 / 总游戏局数
  /// 
  /// 【偏好点数】
  /// 统计玩家最常叫的点数，用于预测其叫牌倾向
  /// 
  /// 【质疑时机】
  /// - 早期质疑：叫牌轮数 ≤ 3轮时质疑
  /// - 后期质疑：叫牌轮数 > 6轮时质疑
  /// 
  /// 【被抓虚张率】
  /// 计算公式：被抓虚张率 = 被抓到虚张次数 / 总虚张次数
  
  /// ===========================
  /// 五、代码实现位置
  /// ===========================
  /// 
  /// 主要实现文件：lib/models/player_profile.dart
  /// 
  /// 关键方法：
  /// - analyzeRound(): 分析单局游戏数据
  /// - _updateTendencies(): 更新玩家倾向百分比
  /// - _analyzePlayerBehavior(): 分析玩家叫牌行为
  /// 
  /// 数据存储：
  /// - totalGames: 总游戏局数
  /// - totalBluffs: 虚张次数
  /// - aggressiveBids: 激进叫牌次数
  /// - normalBids: 正常叫牌次数
  /// - patterns: 行为模式统计Map
}